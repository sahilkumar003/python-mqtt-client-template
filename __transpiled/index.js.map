{"version":3,"file":"index.js","sources":["../components/TopicFunction.js","../template/index.js"],"sourcesContent":["/*\n * This component returns a block of functions that user can use to send messages to specific topic.\n * As input it requires a list of Channel models from the parsed AsyncAPI document\n */\nexport function TopicFunction({ channels }) {\n    const topicsDetails = getTopics(channels);\n    let functions = '';\n  \n    topicsDetails.forEach((t) => {\n      functions += `def send${t.name}(self, id):\n          topic = \"${t.topic}\"\n          self.client.publish(topic, id)\\n`\n    });\n  \n    return functions;\n  }\n  \n  /*\n   * This function returns a list of objects, one for each channel with two properties, name and topic\n   * name - holds information about the operationId provided in the AsyncAPI document\n   * topic - holds information about the address of the topic\n   *\n   * As input it requires a list of Channel models from the parsed AsyncAPI document\n   */\n  function getTopics(channels) {\n    const channelsCanSendTo = channels;\n    let topicsDetails = [];\n  \n    channelsCanSendTo.forEach((ch) => {\n      const topic = {};\n      const operationId = ch.operations().filterByReceive()[0].id();\n      topic.name = operationId.charAt(0).toUpperCase() + operationId.slice(1);\n      topic.topic = ch.address();\n  \n      topicsDetails.push(topic);\n    })\n  \n    return topicsDetails;\n  }\n","import { File, Text } from '@asyncapi/generator-react-sdk'\nimport { TopicFunction } from '../components/TopicFunction'\n\nexport default function ({ asyncapi, params }) {\n  return (\n    <File name=\"client.py\">\n      <Text newLines={2}>import paho.mqtt.client as mqtt</Text>\n\n      <Text newLines={2}>mqttBroker = \"{asyncapi.servers().get(params.server).url()}\"</Text>\n\n      <Text newLines={2}>class {asyncapi.info().title().replaceAll(' ', '')}Client:</Text>\n\n      <Text indent={2} newLines={2}>\n        {`def __init__(self):\n            self.client = mqtt.Client()\n            self.client.connect(mqttBroker)`}\n      </Text>\n\n      <Text indent={2} newLines={2}>\n        <TopicFunction channels={asyncapi.channels().filterByReceive()} />\n      </Text>\n    </File>\n  )\n}\n"],"names":["TopicFunction","channels","topicsDetails","getTopics","functions","forEach","t","name","topic","channelsCanSendTo","ch","operationId","operations","filterByReceive","id","charAt","toUpperCase","slice","address","push","asyncapi","params","_jsxs","File","children","_jsx","Text","newLines","servers","get","server","url","info","title","replaceAll","indent"],"mappings":"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"}